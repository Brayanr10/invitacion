import{_ as B,C as j,y as T,S as C,z as L,o as r,c as d,a as I,f as N,g as v,b as e,w as O,t as _,n as S,i as m,k as g,q as y,F as b,j as x,v as U,m as u,r as E,p as F,e as A}from"./app-af524dac.js";const q={data(){return{modal:{active:!1,name:null,size:"md",isOpening:!1},event:null,shownavbar:!0,fieldShow:[],loader:!1,position:"top-end",errorform:!1,errors:[],relativetypes:[],relative:this.getInitialRelativeState(),familyarray:[],files:[],edit_files:[],previewfile:"",icons:null,moreinfo:this.getInitialInfoState(),infoarray:[],isSticky:!1,initialPosition:null,event_types:[],event_covers:[],event_templates:[],blockgender:!0,cropper:null,file:{file:null,miniature:null,status:0},extension:"",imgDefault:"",template:{id:null,filename:null},cover:{id:null,filename:null},accordion:null,initialData:{event:null,edit_files:[],familyarray:[],infoarray:[],cover:{},template:{},files:[],file:{file:null,miniature:null,status:0}}}},mounted(){this.getdata(),window.addEventListener("scroll",this.handleScroll),window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("click",this.handleDocumentClick),window.addEventListener("keydown",this.keyESC)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener("click",this.handleDocumentClick),window.removeEventListener("keydown",this.keyESC)},methods:{getInitialRelativeState(){return{id:null,type_id:null,type:null,name:null,index:null}},getInitialInfoState(){return{id:null,title:null,icon:null,icon_url:null,description:null,index:null}},async getdata(){this.loader=!0;try{const t={event:this.$route.params.name},[i,c]=await Promise.all([axios.post("/client/event",t),axios.get("/event_types")]);i.data.event?(this.familyarray=[],this.infoarray=[],this.edit_files=[],this.event=i.data.event,this.edit_files=i.data.event.files,i.data.event.family.forEach(a=>{const s={id:a.id,type_id:a.family_type_id,type:a.type.name,name:a.name};this.familyarray.push(s)}),i.data.event.info.forEach(a=>{const s={id:a.id,title:a.title,icon:a.icon_id,icon_url:a.icon.file,description:a.detail};this.infoarray.push(s)}),this.event.cover&&(this.cover.id=i.data.event.cover.id,this.cover.filename=i.data.event.cover.filename),this.event_covers=this.filtergender(i.data.event.type.covers,[this.event.gender]),this.event.template&&(this.template.id=i.data.event.template.id,this.template.filename=i.data.event.template.filename),this.event_templates=this.filtertemplates(i.data.event.type.templates,[this.event.gender]),i.data.event.type.gender==3?this.blockgender=!0:this.blockgender=!1,this.event_types=c.data.event_types,this.initialData=JSON.parse(JSON.stringify({event:this.event,edit_files:this.edit_files,familyarray:this.familyarray,infoarray:this.infoarray,cover:this.cover,template:this.template,files:[],file:{file:null,miniature:null,status:0}})),this.loader=!1,this.$nextTick(()=>{let a=document.getElementById("quick-container");this.initialPosition=this.$refs.quickAccess.getBoundingClientRect().top+window.pageYOffset,a.style.height=this.$refs.quickAccess.offsetHeight+"px"})):this.$router.push({name:"Events"})}catch(t){console.log(t),this.loader=!1,this.notification("Se ha presentado un error, dar click en el menú salir y volver a ingresar","error")}},validate(){this.errors=[],this.event.title&&this.event.title.trim()!=""||this.errors.push("El título del evento es obligatorio"),this.event.subtitle&&this.event.subtitle.trim()!=""||this.errors.push("El subtítulo del evento es obligatorio"),this.event.name&&this.event.name.trim()!=""||this.errors.push("Completa el nombre del evento"),this.event.description&&this.event.description.trim()!=""||this.errors.push("Completa la descripción del evento"),this.event.date||this.errors.push("Selecciona una fecha"),this.event.time||this.errors.push("Selecciona una hora"),this.event.phone!=null&&this.event.phone.toString().length<6&&this.errors.push("El número de celular no es válido"),this.event.whatsapp>0&&this.event.whatsapp.toString().length<6&&this.errors.push("El número de whatsapp no es válido"),this.file.status==1&&this.errors.push("Dale aceptar la foto del perfil"),this.event.gender==null&&this.errors.push("Seleccionar un género"),this.cover.id==null&&this.errors.push("Seleccionar portada"),this.template.id==null&&this.errors.push("Seleccionar plantilla"),this.errors.length>0&&this.notification(this.errors[0],"warning")},savedata(){if(this.validate(),this.hasChanges()){if(this.errors.length==0){this.loader=!0,this.uploadPercentage=0;const c={headers:{"content-type":"multipart/form-data"},onUploadProgress:(function(a){this.uploadPercentage=parseInt(Math.round(a.loaded/a.total*100))}).bind(this)};var t=new FormData;t.append("event",JSON.stringify(this.event)),t.append("family",JSON.stringify(this.familyarray)),t.append("infoarray",JSON.stringify(this.infoarray)),t.append("edit_files",JSON.stringify(this.edit_files)),t.append("type",this.event.type.id),t.append("gender",this.event.gender),t.append("profile",this.file.file),t.append("profileextension",this.extension),t.append("cover",this.cover.id),t.append("template",this.template.id);for(var i=0;i<this.files.length;i++)t.append("files[]",this.files[i].file);document.body.scrollTop=0,document.documentElement.scrollTop=0,axios.post("/client/event/save",t,c).then(a=>{this.errors=a.data.errors,a.data.success?(this.notification("Datos guardados exitosamente","success"),this.getdata(),this.files=[],this.file={file:null,miniature:null,status:0}):(this.uploadPercentage=0,this.notification(this.errors[0],"warning")),this.loader=!1})}}else this.notification("No hay cambios que guardar","warning")},select(t){document.querySelectorAll(".dropdown-container").forEach(function(s){if(s.id!=t){const n=document.getElementById("accordion-"+s.id);n&&(n.style.maxHeight=null,s.classList.remove("active"),setTimeout(()=>{n.style.display="none"},300))}});const c=document.getElementById(t),a=document.getElementById("accordion-"+t);c.classList.toggle("active"),a.style.maxHeight?(this.accordion=null,a.style.maxHeight=null,setTimeout(()=>{a.style.display="none"},300)):(this.accordion="accordion-"+t,a.style.display="block",setTimeout(()=>{a.style.maxHeight=a.scrollHeight+"px",setTimeout(()=>{const s=a.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:s-250,behavior:"smooth"})},300)},10))},updateAccordionHeight(){const t=document.getElementById(this.accordion);t&&t.style.maxHeight&&(t.style.maxHeight=t.scrollHeight+"px")},set_type(t){this.event.type=t,t.gender==3?(this.event.gender=0,this.blockgender=!0,this.event_covers=this.filtergender(t.covers,[t.gender]),this.event_templates=this.filtertemplates(t.templates,[t.gender])):(this.event.gender=null,this.blockgender=!1),this.event.type.id==t.id,this.closemodal()},setgender(t){this.event.gender=t,this.event_covers=this.filtergender(this.event.type.covers,[t]),this.event_templates=this.filtertemplates(this.event.type.templates,[t]),this.closemodal()},filtergender(t,i){return t.filter(c=>i.includes(c.gender))},filtertemplates(t,i){return t.filter(c=>i.includes(c.gender))},setcover(t){this.cover.id=t.id,this.cover.filename=t.filename,this.closemodal()},settemplate(t){this.template.id=t.id,this.template.filename=t.filename},clearData(){this.cropper&&(this.resetCropper(),this.clearCropper(),this.destroyCropper()),this.file=null},clearCropper(){this.cropper.clear()},resetCropper(){this.cropper.reset()},destroyCropper(){this.cropper.destroy()},initCropper(){let t=document.getElementById("previewImgService");this.cropper=null,t&&(this.cropper=new j(t,{aspectRatio:1/1,viewMode:2,minCropBoxWidth:50,moveable:!1,crop(i){}}))},changePicture(t){if(t.target.files[0]){this.file.status=1;let i=t.target.files[0],c=t.target.files[0].name.split(".");this.extension=c[c.length-1];let a=new FileReader;a.readAsDataURL(i),a.onload=s=>{const n=new Image;n.src=s.target.result,n.onload=()=>{let f=document.getElementById("previewImgService");f.src=n.src,f.scrollIntoView({block:"center"}),this.cropper&&(this.resetCropper(),this.clearCropper(),this.destroyCropper()),this.initCropper()},n.onerror=()=>{this.file.status=0,this.extension=null,this.notification("Error de archivo","warning"),this.resetCropper(),this.clearCropper(),this.destroyCropper()}},this.dropinput()}},setcutedphoto(){this.cropper.getCroppedCanvas({width:600,height:600}).toBlob(t=>{this.compressImage(t,"jpeg",600,600,c=>{URL.createObjectURL(c),this.file.file=c,this.file.miniature=URL.createObjectURL(c),this.file.status=2}),this.resetCropper(),this.clearCropper(),this.destroyCropper(),this.dropinput(),document.getElementById("miniaturecontainer").scrollIntoView({block:"center",inline:"center"})})},dropcutedphoto(){this.file.status=0,this.resetCropper(),this.clearCropper(),this.destroyCropper(),this.dropinput()},dropinput(){const t=document.getElementById("miniatureservice");t.value=null},compressImage(t,i,c,a,s){const n=new Image;n.src=URL.createObjectURL(t),n.onload=()=>{const f={maxWidth:c,maxHeight:a,quality:.9,mimeType:"image/jpeg",convertSize:5e6,success(h){const k=new File([h],t.name,{type:"image/jpeg"});s(k)},error(h){console.error("Error al comprimir la imagen",h.message),s(t)}};new T(t,f)}},async relativemodal(){try{const t=await axios.get("/relativetypes");this.relativetypes=t.data.types,this.modal.name="relativetypes",this.modal.type="sm",this.activemodal()}catch(t){console.log(t),this.notification("No se pudieron obtener los tipos de familiares","warning")}},eventypemodal(){this.modal.name="event_types",this.modal.type="sm",this.activemodal()},gendermodal(){this.modal.name="event_gender",this.modal.type="sm",this.activemodal()},covermodal(){this.modal.name="event_cover",this.modal.type="sm",this.activemodal()},setrelativetype(t){this.relative.type=t.name,this.relative.type_id=t.id,this.closemodal()},validrelative(){let t=!0;return this.relative.name&&this.relative.name!=""||(this.notification("Completa el nombre del familiar","warning"),t=!1),this.relative.type_id||(this.notification("Escoge un tipo de familiar","warning"),t=!1),t},addrelative(){if(this.validrelative()){let t=Object.assign({},this.relative);this.familyarray.push(t),this.notification("Familiar agregado","success"),this.cleanformtable()}},droprelative(t){this.familyarray.splice(t,1)},cleanformtable(){this.relative=this.getInitialRelativeState(),this.moreinfo=this.getInitialInfoState()},editrelative(t){let i=Object.assign({},this.familyarray[t]);this.relative=i,this.relative.index=t},editsaverelative(){let t=Object.assign({},this.relative);this.familyarray[t.index]=t,this.cleanformtable()},editinfo(t){let i=Object.assign({},this.infoarray[t]);this.moreinfo=i,this.moreinfo.index=t},editsaveinfo(){let t=Object.assign({},this.moreinfo);this.infoarray[t.index]=t,this.cleanformtable()},getscreenwidth(){this.position="top-end",window.screen.width<768&&(this.position="top")},notification(t,i){this.getscreenwidth(),C.mixin({toast:!0,position:this.position,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,showCloseButton:!0,didOpen:a=>{a.addEventListener("mouseenter",C.stopTimer),a.addEventListener("mouseleave",C.resumeTimer)}}).fire({icon:i,title:t})},handleSubmit(){return Object.keys(this.changedFormData).length===0?[]:this.changedFormData},onlyNumbers(t,i,c){let a=window.Event?t.which:t.keyCode;a==43||a>=48&&a<=57?(t.target.value.length>i&&t.preventDefault(),i==8&&c<9&&a<57&&(t.preventDefault(),this.notification("El primer número debe ser 9","warning"))):t.preventDefault()},cutnumber(t,i,c){if(t.target.value>0)return parseInt(t.target.value.slice(0,c));if(i>0&&(t.target.value=parseInt(i.toString().slice(0,c)),i>9&&c==9&&(this.validatePhone(i)||(this.notification("El número debe empezar por 9","warning"),t.target.value="",this.user.phone=""))),t.target.value=="")return""},cuttext(t,i,c){t.target.value=i.slice(0,c)},dropinput(){const t=document.getElementById("eventphoto");t.value=null},getfileinput(t){const i=Array.from(t.target.files),c=this.edit_files.length+this.files.length,a=c+i.length;let s=i;a>10&&(s=i.slice(0,10-c),i.length-s.length);let n=0;const f=()=>{if(n>=s.length)return;const h=s[n];if(n++,this.files.some(o=>o.file.name===h.name&&o.file.size===h.size)){this.notification(`El archivo ${h.name} ya está en la lista`,"warning"),f();return}if(["image/png","image/jpeg","image/jpg","video/mp4","video/webm","image/tiff","image/jfif"].includes(h.type))if(h.size<130023424){if(h.type.startsWith("image/"))this.compressImage(h,h.type,1400,1400,o=>{const p={miniature:URL.createObjectURL(o),file:o,type:h.type};this.files.push(p),this.updateNotification(s.length,n-1),f()}),this.dropinput();else if(h.type.startsWith("video/")){const o={miniature:URL.createObjectURL(h),file:h,type:h.type};this.files.push(o),this.updateNotification(s.length,n-1),f()}}else this.notification("Tamaño de archivo mayor de 124MB","warning"),f();else this.notification("Formato de archivo no soportado","warning"),f()};f(),this.files.length>10&&(this.files=this.files.slice(0,10),this.notification("Solo se muestran los primeros 10 archivos. Los archivos restantes no se subieron.","warning"))},updateNotification(t,i){10-(this.edit_files.length+this.files.length),t-1===i&&(t>1?this.notification("Fotos agregadas","success"):this.notification("Foto agregada","success"))},compressImage(t,i,c,a,s){const n=new Image;n.src=URL.createObjectURL(t),n.onload=()=>{const f={maxWidth:c,maxHeight:a,quality:.95,mimeType:"image/jpeg",convertSize:5e6,success(h){const k=new File([h],t.name,{type:"image/jpeg"});s(k)},error(h){console.error("Error al comprimir la imagen",h.message),s(t)}};new T(t,f)}},viewfile(t){this.previewfile=this.files[t].miniature,this.modal.name="viewphoto",this.activemodal()},viewoldfile(t){this.previewfile=this.edit_files[t].url,this.modal.name="viewphoto",this.activemodal()},dropfile(t){this.files.splice(t,1),this.previewfile=""},dropeditfile(t){this.edit_files.splice(t,1)},handleScroll(){L(()=>{if(this.event&&this.$refs.Navbar){document.querySelector(".main-profile");const t=this.initialPosition;document.getElementById("quick-container"),this.isSticky=window.pageYOffset>t-this.$refs.Navbar.$el.offsetHeight,this.isSticky?this.$refs.quickAccess.style.top=this.$refs.Navbar.$el.offsetHeight+"px":this.$refs.quickAccess.style.top="0px"}})},activemodal(){if(this.modal.isOpening)return;this.modal.isOpening=!0,this.modal.active=!0;const t=document.getElementById("modal");setTimeout(()=>{t.classList.toggle("active")},20),setTimeout(()=>{this.modal.isOpening=!1},400)},closemodal(){if(this.modal.isOpening){setTimeout(()=>{this.closemodal()},300);return}document.getElementById("modal").classList.remove("active"),setTimeout(()=>{this.modal.active=!1},300)},handleDocumentClick(t){document.getElementById("modal"),this.modal.active&&this.closemodal()},keyESC(){event.keyCode===27&&this.modal.active&&this.closemodal()},async openicons(){try{const t=await axios.get("/geticons");this.icons=t.data.icons,this.modal.name="icons",this.modal.type="sm",this.activemodal()}catch(t){console.log(t),this.notification("No se pudieron obtener los iconos","warning")}},setinfoicon(t){this.moreinfo.icon=t.id,this.moreinfo.icon_url=t.file,this.closemodal()},validmoreinfo(){let t=!0;return this.moreinfo.description&&this.moreinfo.description!=""||(this.notification("Completa la descripción de Más Información","warning"),t=!1),this.moreinfo.icon||(this.moreinfo.icon=50,this.moreinfo.icon_url="dress.svg"),this.moreinfo.title&&this.moreinfo.title!=""||(this.notification("Completa el título de Más Información","warning"),t=!1),t},addinfo(){if(this.validmoreinfo()){let t=Object.assign({},this.moreinfo);this.infoarray.push(t),this.notification("Información agregada","success"),this.cleanformtable()}},dropinfo(t){this.infoarray.splice(t,1)},handleBeforeUnload(t){if(this.hasChanges()){const i="¿Estás seguro de que quieres abandonar la página? Los cambios no guardados se perderán.";return t.returnValue=i,i}},handlePopstate(t){if(this.hasChanges()){const i="¿Estás seguro de que quieres abandonar la página? Los cambios no guardados se perderán.";return t.returnValue=i,i}},hasChanges(){if(this.event){const t={event:this.event,edit_files:this.edit_files,familyarray:this.familyarray,infoarray:this.infoarray,cover:this.cover,template:this.template,files:this.files,file:this.file};return JSON.stringify(t)!==JSON.stringify(this.initialData)}else return!1}},watch:{familyarray:{handler(){this.$nextTick(()=>{this.updateAccordionHeight()})},deep:!0},infoarray:{handler(){this.$nextTick(()=>{this.updateAccordionHeight()})},deep:!0},files:{handler(){this.$nextTick(()=>{this.updateAccordionHeight()})},deep:!0},edit_files:{handler(){this.$nextTick(()=>{this.updateAccordionHeight()})},deep:!0}},computed:{changedFormData(){return Object.keys(this.user).reduce((t,i)=>(this.user[i]!==this.userprimal[i]&&(t[i]=this.user[i],(i=="name"||i=="last_name")&&(this.userprimal[i]==null||this.user[i]=="")&&(this.notification("No puede guardar un campo vacío","warning"),this.getdata(),this.errorform=!0)),t),{})}},beforeRouteLeave(t,i,c){this.hasChanges()?C.fire({title:"¿Seguro que deseas salir?",text:"Se perderán todos los datos que no se han guardado",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",customClass:{container:"xp-sweet-container-xs"}}).then(a=>{a.value?c():c(!1)}):c()}},l=t=>(F("data-v-d2ad76f0"),t=t(),A(),t),P={class:"landing-page-desktop"},R={class:"main-profile"},V={key:0,class:"content-design"},H={class:"index-page-links"},D=l(()=>e("div",{class:"material-symbols-outlined highlight pointer"},"arrow_forward",-1)),M=u("Mis Eventos"),J=u(),z=l(()=>e("div",{class:"material-symbols-outlined highlight pointer"},"arrow_forward",-1)),G=u(),W=l(()=>e("div",{class:"avatar-main"},[e("div",null,[e("span",{class:"headline-medium"},"Página de invitación")])],-1)),Y={id:"quick-container"},K=["href"],Q=l(()=>e("span",{class:"material-symbols-outlined"},"visibility",-1)),X=u(" Ver invitación"),Z=[Q,X],$=l(()=>e("span",{class:"material-symbols-outlined"},"save",-1)),ee=u(" Guardar"),te=[$,ee],ie={class:"design-form"},se=l(()=>e("div",{class:""},[e("span",{class:"label-large"},"Completa o actualiza los datos para tener una invitación más atractiva.")],-1)),oe={class:"dropdown-container w-100",id:"eventinfo"},ne=l(()=>e("span",{class:"label-large"},"Datos del evento",-1)),le=l(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),ae=[ne,le],re={class:"dropdown-content-relative mt-3",id:"accordion-eventinfo"},de={class:"input-group-column"},ce={class:"textbox-input"},me=l(()=>e("label",{class:"label-medium",for:"title"},[u("Título del evento"),e("span",{class:"text-red"},"*")],-1)),he={class:"textbox-input"},ue=l(()=>e("label",{class:"label-medium",for:"subtitle"},[u("Subtítulo del evento"),e("span",{class:"text-red"},"*")],-1)),pe={class:"textbox-input"},ve=l(()=>e("label",{class:"label-medium",for:"name"},[u("Nombre de persona o evento"),e("span",{class:"text-red"},"*")],-1)),fe={class:"textbox-input"},_e=l(()=>e("label",{class:"label-medium",for:"description"},[u("Descripción del evento"),e("span",{class:"text-red"},"*")],-1)),ge={class:"textbox-input"},ye=l(()=>e("label",{class:"label-medium",for:"date"},[u("Fecha del evento"),e("span",{class:"text-red"},"*")],-1)),be={class:"textbox-input"},xe=l(()=>e("label",{class:"label-medium",for:"time"},[u("Hora del evento"),e("span",{class:"text-red"},"*")],-1)),we={class:"textbox-input"},ke=l(()=>e("label",{class:"label-medium",for:"address"},"Dirección del evento",-1)),Ce={class:"dropdown-container w-100",id:"family"},Ie=l(()=>e("span",{class:"label-large"},"Datos de Familiares",-1)),Se=l(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),Ee=[Ie,Se],Te={class:"dropdown-content-relative mt-3",id:"accordion-family"},Be={class:"input-group-column"},je={class:"textbox-input"},Le=l(()=>e("label",{class:"label-medium"},"Tipo",-1)),Ne=["textContent"],Oe=l(()=>e("span",{class:"material-symbols-outlined"},"expand_more",-1)),Ue={class:"textbox-input"},Fe=["textContent"],Ae={class:"edit-buttons text-center"},qe={class:"w-100 textbox-input"},Pe={class:"w-100 table-container"},Re={class:"table table-icon"},Ve=l(()=>e("thead",{class:"table-head"},[e("tr",null,[e("th",{class:"table-cell text-gray-700 label-medium"},"Título"),e("th",{class:"table-cell text-gray-700 label-medium"},"Nombres y Apellidos"),e("th",{class:"table-cell text-gray-700 label-medium"},"Acción")])],-1)),He={class:"table-cell cell-gray body-medium"},De={class:"table-cell cell-gray body-medium"},Me={class:"table-cell cell-gray body-medium"},Je={class:"service-edit-actions"},ze=["onClick"],Ge=l(()=>e("span",{class:"material-symbols-outlined"},"edit",-1)),We=[Ge],Ye=["onClick"],Ke=l(()=>e("span",{class:"material-symbols-outlined"},"delete",-1)),Qe=[Ke],Xe={class:"dropdown-container w-100",id:"photos"},Ze=l(()=>e("span",{class:"label-large"},"Plantilla y Fotos",-1)),$e=l(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),et=[Ze,$e],tt={class:"dropdown-content-relative mt-3",id:"accordion-photos"},it={class:"input-group-column"},st=l(()=>e("div",null,[e("span",{class:"label-medium"},[u("Seleccionar Plantilla"),e("span",{class:"text-red"},"*")])],-1)),ot={class:"input-group-column"},nt={class:"template-list"},lt={class:"template-item"},at=["onClick"],rt=["src"],dt={class:"text-center"},ct=["textContent"],mt=l(()=>e("br",null,null,-1)),ht=l(()=>e("span",{class:"body-small text-green"},"Gratis",-1)),ut={class:"text-center"},pt=["onClick","textContent"],vt=l(()=>e("div",null,[e("span",{class:"label-medium"},"Agrega tu foto de perfil")],-1)),ft={class:"avatar-main",id:"imagecontainer"},_t={class:"avatar-buttons"},gt={class:"default-avatar",id:"miniaturecontainer"},yt={key:0,class:"avatar-img small"},bt=["src"],xt={key:1,class:"avatar-img small"},wt=["src"],kt={key:2,class:"avatar-initial"},Ct=l(()=>e("span",{class:"material-symbols-outlined text-white"},"photo",-1)),It=[Ct],St={class:"avatar-options"},Et=l(()=>e("div",null,[e("span",{class:"body-medium"},"Formatos: JPG, PNG, JFIF o TIFF")],-1)),Tt=l(()=>e("label",{for:"miniatureservice",class:"button small secondary-dark"},[e("span",{class:"material-symbols-outlined"},"add_photo_alternate"),u("Subir logo")],-1)),Bt={key:0,class:"avatar-options"},jt={class:"btn-group-avatar"},Lt=l(()=>e("span",{class:"material-symbols-outlined text-green"},"check",-1)),Nt=u(" Aceptar"),Ot=[Lt,Nt],Ut=l(()=>e("span",{class:"material-symbols-outlined text-red"},"close",-1)),Ft=u(" Cancelar"),At=[Ut,Ft],qt=l(()=>e("div",{class:"upload-cropper-container"},[e("div",{class:"upload-cropper"},[e("img",{alt:"",id:"previewImgService"})])],-1)),Pt=l(()=>e("div",{class:""},[e("span",{class:"label-medium"},"Agrega tus fotos del evento")],-1)),Rt={key:0,class:"event-photos-card-container"},Vt={class:"service-edit-card"},Ht={class:"service-photo"},Dt=["src"],Mt={class:"service-edit-content"},Jt={class:"service-fileedit-actions"},zt=["onClick"],Gt=l(()=>e("span",{class:"material-symbols-outlined"},"visibility",-1)),Wt=u(" Ver"),Yt=[Gt,Wt],Kt=["onClick"],Qt=l(()=>e("span",{class:"material-symbols-outlined"},"delete",-1)),Xt=u(" Borrar"),Zt=[Qt,Xt],$t={class:"service-edit-card"},ei={class:"service-photo"},ti=["src"],ii=["src"],si={class:"service-edit-content"},oi={class:"service-fileedit-actions"},ni=["onClick"],li=l(()=>e("span",{class:"material-symbols-outlined"},"visibility",-1)),ai=u(" Ver"),ri=[li,ai],di=["onClick"],ci=l(()=>e("span",{class:"material-symbols-outlined"},"delete",-1)),mi=u(" Borrar"),hi=[ci,mi],ui={key:1,class:""},pi=["textContent"],vi={key:2,class:""},fi=l(()=>e("span",{class:"body-large"},"* Puedes subir máximo 10 fotos",-1)),_i=[fi],gi={key:3,class:"upload-container"},yi=l(()=>e("label",{for:"eventphoto",class:"button small primary circle"},[e("span",{class:"material-symbols-outlined"}," add_photo_alternate ")],-1)),bi=l(()=>e("span",{class:"body-medium"},"Click para subir fotos. Formatos: JPG, PNG, JFIF o TIFF. (Máximo 10 fotos)",-1)),xi={class:"dropdown-container w-100",id:"moreinfo"},wi=l(()=>e("span",{class:"label-large"},"Más Información",-1)),ki=l(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),Ci=[wi,ki],Ii={class:"dropdown-content-relative mt-3",id:"accordion-moreinfo"},Si={class:"input-group-column"},Ei=l(()=>e("div",null,[e("span",{class:"label-medium"},"Agrega información como vestimenta, mascota, barra libre, cena, etc")],-1)),Ti={class:"textbox-input"},Bi=l(()=>e("label",{class:"label-medium",for:"info_title"},"Título",-1)),ji={class:"textbox-input"},Li=l(()=>e("label",{class:"label-medium"},"Icono",-1)),Ni=["src"],Oi=l(()=>e("span",{class:"material-symbols-outlined"},"expand_more",-1)),Ui={class:"textbox-input"},Fi=l(()=>e("label",{class:"label-medium",for:"info_description"},"Descripción",-1)),Ai={class:"edit-buttons text-center"},qi={class:"w-100 textbox-input"},Pi={class:"w-100 table-container"},Ri={class:"table table-icon"},Vi=l(()=>e("thead",{class:"table-head"},[e("tr",null,[e("th",{class:"table-cell text-gray-700 label-medium"},"Título"),e("th",{class:"table-cell text-gray-700 label-medium"},"Icono"),e("th",{class:"table-cell text-gray-700 label-medium"},"Descripción"),e("th",{class:"table-cell text-gray-700 label-medium"},"Acción")])],-1)),Hi={class:"table-cell cell-gray body-medium"},Di={class:"table-cell cell-gray body-medium text-center icon-selected"},Mi=["src"],Ji={class:"table-cell cell-gray body-medium descript"},zi={class:"table-cell cell-gray body-medium"},Gi={class:"service-edit-actions"},Wi=["onClick"],Yi=l(()=>e("span",{class:"material-symbols-outlined"},"edit",-1)),Ki=[Yi],Qi=["onClick"],Xi=l(()=>e("span",{class:"material-symbols-outlined"},"delete",-1)),Zi=[Xi],$i={class:"modal-shadow"},es={class:"modal-header"},ts=l(()=>e("div",{claas:""},null,-1)),is=u("Cerrar "),ss=l(()=>e("span",{class:"material-symbols-outlined"},"close",-1)),os=[is,ss],ns={key:0,class:"modal-body"},ls=l(()=>e("div",{class:"modal-title"},[e("span",{class:"title-small"},"Seleccionar Icono:")],-1)),as={class:"icon-list-container"},rs=["onClick"],ds=["src"],cs={key:1,class:"modal-body"},ms=l(()=>e("div",{class:"modal-title"},[e("span",{class:"title-small"},"Seleccionar Tipo:")],-1)),hs={class:"option-list"},us=["textContent","onClick"],ps={key:2,class:"modal-body"},vs={key:0,class:"preview-file-service"},fs=["src"],_s={key:3,class:"modal-body"},gs=l(()=>e("div",{class:"modal-title"},[e("span",{class:"title-small"},"Seleccionar Tipo:")],-1)),ys={class:"option-list"},bs=["textContent","onClick"],xs={key:4,class:"modal-body"},ws=l(()=>e("div",{class:"modal-title"},[e("span",{class:"title-small"},"Seleccionar Género:")],-1)),ks={class:"option-list"},Cs={key:5,class:"modal-body"},Is=l(()=>e("div",{class:"modal-title"},[e("span",{class:"title-small"},"Seleccionar Portada:")],-1)),Ss={class:"option-list"},Es=["onClick"],Ts=["src"];function Bs(t,i,c,a,s,n){const f=E("nav-bar"),h=E("loader"),k=E("router-link");return r(),d("div",P,[I(f,{shownavbar:s.shownavbar,ref:"Navbar"},null,8,["shownavbar"]),s.loader?(r(),N(h,{key:0})):v("",!0),e("div",R,[s.event?(r(),d("div",V,[e("div",H,[D,I(k,{to:"/cliente/eventos",class:"body-small"},{default:O(()=>[M]),_:1}),J,z,G,I(k,{to:"/cliente/evento/"+s.event.url_edit,class:"body-small",textContent:_(s.event.type.name+" de "+s.event.name)},null,8,["to","textContent"])]),W,e("div",Y,[e("div",{ref:"quickAccess",class:S({"quick-access":!0,sticky:s.isSticky})},[e("a",{href:s.event.url,target:"_blank",class:"button small secondary quick"},Z,8,K),e("button",{class:"button small primary quick",onClick:i[0]||(i[0]=m(o=>n.savedata(),["stop"]))},te)],2)]),e("div",ie,[se,e("div",oe,[e("div",{class:"button medium title-accordion pointer",onClick:i[1]||(i[1]=m(o=>n.select("eventinfo"),["stop"]))},ae),e("div",re,[e("div",de,[e("div",ce,[me,g(e("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":i[2]||(i[2]=o=>s.event.title=o),class:"textbox medium primary",maxlength:"50",onInput:i[3]||(i[3]=o=>n.cuttext(o,s.event.title,49))},null,544),[[y,s.event.title]])]),e("div",he,[ue,g(e("input",{type:"text",name:"subtitle",id:"subtitle","onUpdate:modelValue":i[4]||(i[4]=o=>s.event.subtitle=o),class:"textbox medium primary",maxlength:"60",onInput:i[5]||(i[5]=o=>n.cuttext(o,s.event.subtitle,59))},null,544),[[y,s.event.subtitle]])]),e("div",pe,[ve,g(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":i[6]||(i[6]=o=>s.event.name=o),class:"textbox medium primary",maxlength:"30",onInput:i[7]||(i[7]=o=>n.cuttext(o,s.event.name,29))},null,544),[[y,s.event.name]])]),e("div",fe,[_e,g(e("textarea",{name:"description",id:"description","onUpdate:modelValue":i[8]||(i[8]=o=>s.event.description=o),class:"textbox medium primary area descr",maxlength:"400",onInput:i[9]||(i[9]=o=>n.cuttext(o,s.event.description,400))},null,544),[[y,s.event.description]])]),e("div",ge,[ye,g(e("input",{type:"date",name:"date",id:"date","onUpdate:modelValue":i[10]||(i[10]=o=>s.event.date=o),class:"textbox medium primary input-datetime"},null,512),[[y,s.event.date]])]),e("div",be,[xe,g(e("input",{type:"time",name:"time",id:"time","onUpdate:modelValue":i[11]||(i[11]=o=>s.event.time=o),class:"textbox medium primary input-datetime"},null,512),[[y,s.event.time]])]),e("div",we,[ke,g(e("input",{type:"text",name:"address",id:"address","onUpdate:modelValue":i[12]||(i[12]=o=>s.event.address=o),class:"textbox medium primary",maxlength:"100",onInput:i[13]||(i[13]=o=>n.cuttext(o,s.event.address,100))},null,544),[[y,s.event.address]])])])])]),e("div",Ce,[e("div",{class:"button medium title-accordion pointer",onClick:i[14]||(i[14]=m(o=>n.select("family"),["stop"]))},Ee),e("div",Te,[e("div",Be,[e("div",je,[Le,e("button",{class:"dropdown dropdown-small",onClick:i[15]||(i[15]=m(o=>n.relativemodal(),["stop"]))},[e("span",{class:"body-medium dropd-text",textContent:_(s.relative.type_id!=null?s.relative.type:"Seleccionar")},null,8,Ne),Oe])]),e("div",Ue,[e("label",{class:"label-medium",for:"relativename",textContent:_("Nombres y Apellidos "+(s.relative.type?(s.relative.type_id==2||s.relative.type_id==4?"de la ":"del ")+s.relative.type:""))},null,8,Fe),g(e("input",{type:"text",name:"relativename",id:"relativename","onUpdate:modelValue":i[16]||(i[16]=o=>s.relative.name=o),class:"textbox medium primary",maxlength:"50",onInput:i[17]||(i[17]=o=>n.cuttext(o,s.relative.name,50))},null,544),[[y,s.relative.name]])]),e("div",Ae,[s.relative.index!=null?(r(),d("button",{key:0,class:"button medium secondary",onClick:i[18]||(i[18]=m(o=>n.cleanformtable(),["stop"]))},"Cancelar")):v("",!0),s.relative.index==null?(r(),d("button",{key:1,class:"button medium primary",onClick:i[19]||(i[19]=m(o=>n.addrelative(),["stop"]))},"Agregar")):(r(),d("button",{key:2,class:"button medium primary",onClick:i[20]||(i[20]=m(o=>n.editsaverelative(),["stop"]))},"Editar"))]),e("div",qe,[e("div",Pe,[e("table",Re,[Ve,e("tbody",null,[(r(!0),d(b,null,x(s.familyarray,(o,p)=>(r(),d("tr",null,[e("td",He,_(o.type),1),e("td",De,_(o.name),1),e("td",Me,[e("div",Je,[e("a",{class:"icon-text highlight label-medium",onClick:m(w=>n.editrelative(p),["stop"])},We,8,ze),e("a",{class:"icon-text red-700 label-medium",onClick:m(w=>n.droprelative(p),["stop"])},Qe,8,Ye)])])]))),256))])])])])])])]),e("div",Xe,[e("div",{class:"button medium title-accordion pointer",onClick:i[21]||(i[21]=m(o=>n.select("photos"),["stop"]))},et),e("div",tt,[e("div",it,[st,e("div",ot,[e("div",nt,[(r(!0),d(b,null,x(s.event_templates,o=>(r(),d("div",lt,[e("div",{class:"template-miniature",onClick:m(p=>n.settemplate(o),["stop"])},[e("img",{src:"/img/templates_mini/"+o.filename},null,8,rt)],8,at),e("div",dt,[e("span",{class:"label-medium",textContent:_(o.name)},null,8,ct),mt,ht]),e("div",ut,[e("button",{class:S(["button medium",s.template.id==o.id?"primary":"tertiary"]),onClick:m(p=>n.settemplate(o),["stop"]),textContent:_(s.template.id==o.id?"Seleccionado":"Seleccionar")},null,10,pt)])]))),256))])]),vt,e("div",ft,[e("div",_t,[e("div",gt,[s.file.miniature?(r(),d("div",yt,[e("img",{src:s.file.miniature},null,8,bt)])):s.event.profile_photo?(r(),d("div",xt,[e("img",{src:s.event.profileaws},null,8,wt)])):(r(),d("div",kt,It))]),e("div",St,[Et,e("div",null,[e("input",{type:"file",name:"miniatureservice",id:"miniatureservice",class:"input-file",onChange:i[22]||(i[22]=(...o)=>n.changePicture&&n.changePicture(...o)),onClick:i[23]||(i[23]=m(o=>n.dropinput(),["stop"])),accept:"image/x-png,image/jpeg,image/jpg,image/tiff,image/jfif"},null,32),Tt])])]),s.file.status==1?(r(),d("div",Bt,[e("div",jt,[e("button",{class:"button small tertiary",onClick:i[24]||(i[24]=m((...o)=>n.setcutedphoto&&n.setcutedphoto(...o),["stop"]))},Ot),e("button",{class:"button small tertiary",onClick:i[25]||(i[25]=m((...o)=>n.dropcutedphoto&&n.dropcutedphoto(...o),["stop"]))},At)]),qt])):v("",!0)]),Pt,s.edit_files.length>0||s.files.length>0?(r(),d("div",Rt,[(r(!0),d(b,null,x(s.edit_files,(o,p)=>(r(),d("div",Vt,[e("div",Ht,[e("img",{src:o.url},null,8,Dt)]),e("div",Mt,[e("div",Jt,[e("a",{class:"icon-text highlight label-medium",onClick:m(w=>n.viewoldfile(p),["stop"])},Yt,8,zt),e("a",{class:"icon-text gray-900 label-medium",onClick:m(w=>n.dropeditfile(p),["stop"])},Zt,8,Kt)])])]))),256)),(r(!0),d(b,null,x(s.files,(o,p)=>(r(),d("div",$t,[e("div",ei,[["image/png","image/jpeg","image/jpg","image/jfif","image/tiff"].includes(o.type)?(r(),d("img",{key:0,src:o.miniature},null,8,ti)):["video/mp4","video/webm"].includes(o.type)?(r(),d("video",{key:1,src:o.miniature},null,8,ii)):v("",!0)]),e("div",si,[e("div",oi,[e("a",{class:"icon-text highlight label-medium",onClick:m(w=>n.viewfile(p),["stop"])},ri,8,ni),e("a",{class:"icon-text gray-900 label-medium",onClick:m(w=>n.dropfile(p),["stop"])},hi,8,di)])])]))),256))])):v("",!0),s.edit_files.length+s.files.length>0&&s.edit_files.length+s.files.length<10?(r(),d("div",ui,[e("span",{class:"body-large",textContent:_("* "+(s.edit_files.length+s.files.length)+" de 10 fotos subidas")},null,8,pi)])):s.edit_files.length+s.files.length>9?(r(),d("div",vi,_i)):v("",!0),s.edit_files.length+s.files.length<10?(r(),d("div",gi,[e("input",{type:"file",name:"eventphoto",id:"eventphoto",class:"input-file",onChange:i[26]||(i[26]=(...o)=>n.getfileinput&&n.getfileinput(...o)),accept:"image/x-png,image/jpeg,image/jpg,image/tiff,image/jfif",multiple:""},null,32),yi,bi])):v("",!0)])])]),e("div",xi,[e("div",{class:"button medium title-accordion pointer",onClick:i[27]||(i[27]=m(o=>n.select("moreinfo"),["stop"]))},Ci),e("div",Ii,[e("div",Si,[Ei,e("div",Ti,[Bi,g(e("input",{type:"text",name:"info_title",id:"info_title","onUpdate:modelValue":i[28]||(i[28]=o=>s.moreinfo.title=o),class:"textbox medium primary",maxlength:"50",onInput:i[29]||(i[29]=o=>n.cuttext(o,s.moreinfo.title,50))},null,544),[[y,s.moreinfo.title]])]),e("div",ji,[Li,e("button",{class:"button medium outlined-white icon-selected",onClick:i[30]||(i[30]=m(o=>n.openicons(),["stop"]))},[e("img",{class:"icon-violet",src:s.moreinfo.icon?"/img/othericons/"+s.moreinfo.icon_url:"/img/othericons/dress.svg"},null,8,Ni),Oi])]),e("div",Ui,[Fi,g(e("textarea",{name:"info_description",id:"info_description","onUpdate:modelValue":i[31]||(i[31]=o=>s.moreinfo.description=o),class:"textbox medium primary area moreinfo",maxlength:"600",onInput:i[32]||(i[32]=o=>n.cuttext(o,s.moreinfo.description,600))},null,544),[[y,s.moreinfo.description]])]),e("div",Ai,[s.moreinfo.index!=null?(r(),d("button",{key:0,class:"button medium secondary",onClick:i[33]||(i[33]=m(o=>n.cleanformtable(),["stop"]))},"Cancelar")):v("",!0),s.moreinfo.index==null?(r(),d("button",{key:1,class:"button medium primary",onClick:i[34]||(i[34]=m(o=>n.addinfo(),["stop"]))},"Agregar")):(r(),d("button",{key:2,class:"button medium primary",onClick:i[35]||(i[35]=m(o=>n.editsaveinfo(),["stop"]))},"Editar"))]),e("div",qi,[e("div",Pi,[e("table",Ri,[Vi,e("tbody",null,[(r(!0),d(b,null,x(s.infoarray,(o,p)=>(r(),d("tr",null,[e("td",Hi,_(o.title),1),e("td",Di,[e("img",{class:"icon-violet",src:"/img/othericons/"+o.icon_url},null,8,Mi)]),e("td",Ji,_(o.description),1),e("td",zi,[e("div",Gi,[e("a",{class:"icon-text highlight label-medium",onClick:m(w=>n.editinfo(p),["stop"])},Ki,8,Wi),e("a",{class:"icon-text red-700 label-medium",onClick:m(w=>n.dropinfo(p),["stop"])},Zi,8,Qi)])])]))),256))])])])])])])])])])):v("",!0),g(e("div",$i,[e("div",{class:S(["modal-container",s.modal.size]),onClick:i[39]||(i[39]=m(()=>{},["stop"])),id:"modal"},[e("div",es,[ts,e("div",null,[e("button",{class:"button small tertiary",onClick:i[36]||(i[36]=m(o=>n.closemodal(!0),["stop"]))},os)])]),s.modal.name=="icons"?(r(),d("div",ns,[ls,e("div",as,[(r(!0),d(b,null,x(s.icons,o=>(r(),d("div",{class:"button medium outlined icon-item-menu",onClick:m(p=>n.setinfoicon(o),["stop"])},[e("img",{class:"icon-violet",src:"/img/othericons/"+o.file},null,8,ds)],8,rs))),256))])])):v("",!0),s.modal.name=="relativetypes"?(r(),d("div",cs,[ms,e("div",hs,[(r(!0),d(b,null,x(s.relativetypes,o=>(r(),d("button",{class:"button small secondary",textContent:_(o.name),onClick:m(p=>n.setrelativetype(o),["stop"])},null,8,us))),256))])])):v("",!0),s.modal.name=="viewphoto"?(r(),d("div",ps,[s.previewfile!=""?(r(),d("div",vs,[e("img",{src:s.previewfile},null,8,fs)])):v("",!0)])):v("",!0),s.modal.name=="event_types"?(r(),d("div",_s,[gs,e("div",ys,[(r(!0),d(b,null,x(s.event_types,(o,p)=>(r(),d("button",{class:"button small secondary",textContent:_(o.label),onClick:m(w=>n.set_type(o),["stop"])},null,8,bs))),256))])])):v("",!0),s.modal.name=="event_gender"?(r(),d("div",xs,[ws,e("div",ks,[e("button",{class:"button small secondary",onClick:i[37]||(i[37]=m(o=>n.setgender(1),["stop"]))},"Hombre"),e("button",{class:"button small secondary",onClick:i[38]||(i[38]=m(o=>n.setgender(2),["stop"]))},"Mujer")])])):v("",!0),s.modal.name=="event_cover"?(r(),d("div",Cs,[Is,e("div",Ss,[(r(!0),d(b,null,x(s.event_covers,o=>(r(),d("div",{class:"cover-img",onClick:m(p=>n.setcover(o),["stop"])},[e("img",{src:"/img/covers/"+o.filename},null,8,Ts)],8,Es))),256))])])):v("",!0)],2)],512),[[U,s.modal.active]])])])}const Ls=B(q,[["render",Bs],["__scopeId","data-v-d2ad76f0"]]);export{Ls as default};
