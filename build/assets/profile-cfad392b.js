import{_ as x,S as p,o as v,c as y,a as C,f as S,g as k,b as e,t as c,k as d,q as m,i as l,s as h,d as g,r as w,p as I,e as N,m as _}from"./app-af524dac.js";const V={data(){return{user:{name:"",last_name:"",phone:null,email:null,percentage:0,gender:null,age:null,initial:null},userprimal:{name:"",last_name:"",phone:null,email:null,percentage:0,gender:null,age:null,initial:null},password:{actual:"",new:"",confirm:""},shownavbar:!0,fieldShow:[],loader:!1,position:"top-end",errorform:!1,errors:[]}},mounted(){this.getdata()},methods:{getdata(){this.loader=!0,axios.get("/client/userdata").then(t=>{t.data.user?(this.user.name=t.data.user.name,this.user.last_name=t.data.user.lastname,this.user.phone=t.data.user.phone,this.user.email=t.data.user.email,this.user.percentage=t.data.client.complete,this.user.initial=t.data.initial,this.user.age=t.data.client.age,this.user.gender=t.data.client.gender,this.userprimal.name=t.data.user.name,this.userprimal.last_name=t.data.user.lastname,this.userprimal.phone=t.data.user.phone,this.userprimal.email=t.data.user.email,this.userprimal.percentage=t.data.client.complete,this.userprimal.initial=t.data.initial,this.userprimal.age=t.data.client.age,this.userprimal.gender=t.data.client.gender):(localStorage.removeItem("usertype"),localStorage.removeItem("auth"),localStorage.removeItem("google"),this.notification("Se ha presentado un error, dar click en el menú salir y volver a ingresar","error"),this.$router.push("/")),this.loader=!1})},savedata(){if(this.errorform=!1,Object.keys(this.handleSubmit()).length>0){if(!this.errorform){const t={user:this.handleSubmit()};axios.post("/client/userdata",t).then(s=>{s.data.success&&(this.notification("Datos guardados","success"),this.getdata())})}}else this.notification("No hay cambios que guardar","warning")},select(t){document.querySelectorAll(".dropdown-container").forEach(function(u){u.id!=t&&u.classList.remove("active")}),document.getElementById(t).classList.toggle("active")},setdoc_type(t){this.user.doc_type=t,this.select("document"),this.user.doc_type_text=this.settypename(t)},settypename(t){if(t==1)var s="DNI";if(t==2)var s="Carnet de extranjería";if(t==3)var s="Pasaporte";return s},changeFieldShow(t){if(this.fieldShow.includes(t)){let s=this.fieldShow.indexOf(t);s>=0&&this.fieldShow.splice(s,1)}else this.fieldShow.push(t)},validatePassword(){this.errors=[],(this.password.actual.length==0||this.password.new.length==0)&&this.errors.push("Contraseña vacía"),this.password.confirm.length==0&&this.errors.push("Confirmar contraseña"),this.password.new.length>=4&&this.password.new.length<=20||this.errors.push("Formato de contraseña nueva incorrecto"),this.password.confirm.length>=4&&this.password.confirm.length<=20||this.errors.push("Formato de confirmar contraseña incorrecto"),this.password.new.length>0&&this.password.confirm.length>0&&this.password.new==this.password.confirm||this.errors.push("Las contraseñas ingresadas no coinciden"),this.errors.length>0&&this.notification(this.errors[0],"warning")},validatePhone(t){return/^9[0-9]+/.test(t)},onlyNumbers(t,s){let r=window.Event?t.which:t.keyCode;r>=48&&r<=57?t.target.value.length>s&&t.preventDefault():t.preventDefault()},getscreenwidth(){this.position="top-end",window.screen.width<768&&(this.position="top")},notification(t,s){this.getscreenwidth(),p.mixin({toast:!0,position:this.position,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,showCloseButton:!0,didOpen:u=>{u.addEventListener("mouseenter",p.stopTimer),u.addEventListener("mouseleave",p.resumeTimer)}}).fire({icon:s,title:t})},handleSubmit(){return Object.keys(this.changedFormData).length===0?[]:this.changedFormData},changepassword(){if(this.validatePassword(),this.errors.length==0){const t={password:this.password};axios.post("/user/changepassword",t).then(s=>{s.data.success&&(this.notification(s.data.message,"success"),this.password.actual="",this.password.new="",this.password.confirm="")}).catch(s=>{this.notification(s.response.data.errors[0],"error")})}else this.notification(this.errors[0],"error")},cutnumber(t,s,r){if(t.target.value>0&&(t.target.value=parseInt(t.target.value.slice(0,r))),s>0&&(t.target.value=parseInt(s.toString().slice(0,r))),t.target.value=="")return""},cuttext(t,s,r){t.target.value=s.slice(0,r)}},computed:{changedFormData(){return Object.keys(this.user).reduce((t,s)=>(this.user[s]!==this.userprimal[s]&&(t[s]=this.user[s],(s=="name"||s=="last_name")&&(this.userprimal[s]==null||this.user[s]=="")&&(this.notification("No puede guardar un campo vacío","warning"),this.getdata(),this.errorform=!0)),t),{})}}},a=t=>(I("data-v-28588368"),t=t(),N(),t),D={class:"landing-page-desktop"},F={class:"main-profile"},B=a(()=>e("div",{class:"profile-header-container"},null,-1)),E={class:"content-profile"},U={class:"avatar-main"},L={class:"default-avatar"},T={class:"avatar-initial"},j=["textContent"],O={class:"avatar-options"},P=a(()=>e("div",null,[e("span",{class:"headline-medium"},"Mi perfil")],-1)),q={class:"pro-progress-container"},M={class:"body-small"},R=["value"],A={class:"personal-form"},G=a(()=>e("div",{class:"title-profile"},[e("div",{class:"title-medium"}," Datos personales de cliente "),e("div",{class:"body-large"}," Cuéntanos un poco más sobre ti. ")],-1)),K={class:"input-group-profile"},W={class:"textbox-input"},z=a(()=>e("label",{class:"label-medium",for:"name"},"Nombres",-1)),H={class:"textbox-input"},J=a(()=>e("label",{class:"label-medium",for:"last_name"},"Apellidos",-1)),Q={class:"input-group-profile"},X={class:"textbox-input"},Y=a(()=>e("label",{class:"label-medium",for:"age"},"Edad",-1)),Z={class:"textbox-input"},$=a(()=>e("label",{class:"label-medium",for:"phone"},"Celular",-1)),ss={class:"input-group-profile"},es={class:"textbox-input"},ts=a(()=>e("label",{class:"label-medium",for:"email"},"Correo electrónico",-1)),os=["value"],is=g('<div class="a-stretch" data-v-28588368><div class="banner small reminder w-inherit" data-v-28588368><button class="button disabled small secondary" data-v-28588368><span class="material-symbols-outlined" data-v-28588368>info</span></button><div class="body-medium highlight" data-v-28588368>Los datos brindados nos permitirá ofrecerles mejores servicios y comunicarnos con usted de ser necesario para las promociones o descuentos. No se compartirán sus datos sin su autorización.</div></div></div>',1),as=a(()=>e("span",{class:"material-symbols-outlined"},"save",-1)),ns=_("Guardar cambios"),rs=[as,ns],ls={class:"personal-form"},ds={class:"dropdown-container",id:"changepassword"},us=a(()=>e("span",{class:"title-medium dropd-text"},"Contraseña",-1)),cs=a(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),ms=[us,cs],ps={class:"personal-form"},hs=a(()=>e("div",{class:"body-large"}," Cambia tu contraseña cuando quieras. ",-1)),vs={class:"textbox-input"},ws=a(()=>e("label",{class:"label-medium",for:"old_password"},"Contraseña actual",-1)),gs=["type"],_s=["textContent"],fs={class:"w-100"},bs={class:"textbox-input"},xs=a(()=>e("label",{class:"label-medium",for:"newpassword"},"Nueva contraseña",-1)),ys=["type"],Cs=["textContent"],Ss={class:"w-100"},ks={class:"textbox-input"},Is=a(()=>e("label",{class:"label-medium",for:"confirmnewpassword"},"Repetir contraseña",-1)),Ns=["type"],Vs=["textContent"],Ds=a(()=>e("span",{class:"material-symbols-outlined"},"save",-1)),Fs=_(" Guardar cambios"),Bs=[Ds,Fs],Es={class:"personal-form"},Us={class:"dropdown-container",id:"help"},Ls=a(()=>e("span",{class:"title-medium"},"¿Necesitas ayuda?",-1)),Ts=a(()=>e("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),js=[Ls,Ts],Os=g('<div class="dropdown-content-relative mt-3" data-v-28588368><div class="input-group-profile" data-v-28588368><a class="button small tertiary icon-text" href="https://wa.me/+51907327913?text=Hola%2C%20vengo%20desde%20la%20web%20de%20Rumba77%2C%20necesito%20ayuda" target="_blank" data-v-28588368><img src="/img/whatsapp-black.svg" class="icon-primary violet" data-v-28588368><div class="" data-v-28588368>907 327 913</div></a><a class="button small tertiary icon-text" href="https://web.facebook.com/rumba77.oficial" target="_blank" data-v-28588368><img src="/img/facebook-white.svg" class="icon-primary violet" data-v-28588368><div class="" data-v-28588368>Rumba77</div></a><a class="button small tertiary icon-text" href="mailto:hola@rumba77.com" data-v-28588368><span class="material-symbols-outlined icon-left highlight" data-v-28588368>mail</span><div class="" data-v-28588368>hola@rumba77.com</div></a></div></div>',1);function Ps(t,s,r,u,i,n){const f=w("nav-bar"),b=w("loader");return v(),y("div",D,[C(f,{shownavbar:i.shownavbar},null,8,["shownavbar"]),i.loader?(v(),S(b,{key:0})):k("",!0),e("div",F,[B,e("div",E,[e("div",U,[e("div",L,[e("div",T,[e("span",{class:"headline-large text-white",textContent:c(i.user.initial?i.user.initial:"R")},null,8,j)])]),e("div",O,[P,e("div",q,[e("div",null,[e("span",M,c(parseInt(i.user.percentage))+"% completado",1)]),e("progress",{class:"profile-progress",value:i.user.percentage,max:"100"},null,8,R)])])]),e("div",A,[G,e("div",K,[e("div",W,[z,d(e("input",{type:"text",name:"",id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>i.user.name=o),class:"textbox medium primary",maxlength:"30",onInput:s[1]||(s[1]=o=>n.cuttext(o,i.user.name,29))},null,544),[[m,i.user.name]])]),e("div",H,[J,d(e("input",{type:"text",name:"",id:"last_name","onUpdate:modelValue":s[2]||(s[2]=o=>i.user.last_name=o),class:"textbox medium primary",maxlength:"30",onInput:s[3]||(s[3]=o=>n.cuttext(o,i.user.last_name,29))},null,544),[[m,i.user.last_name]])])]),e("div",Q,[e("div",X,[Y,d(e("input",{type:"number",name:"",id:"age",maxlength:"2",onKeypress:s[4]||(s[4]=o=>n.onlyNumbers(o,1)),onInput:s[5]||(s[5]=o=>n.cutnumber(o,i.user.age,2)),"onUpdate:modelValue":s[6]||(s[6]=o=>i.user.age=o),class:"textbox medium primary"},null,544),[[m,i.user.age]])]),e("div",Z,[$,d(e("input",{type:"number",name:"",id:"phone",onKeypress:s[7]||(s[7]=o=>n.onlyNumbers(o,13)),onInput:s[8]||(s[8]=o=>n.cutnumber(o,i.user.phone,14)),maxlength:"9","onUpdate:modelValue":s[9]||(s[9]=o=>i.user.phone=o),class:"textbox medium primary"},null,544),[[m,i.user.phone]])])]),e("div",ss,[e("div",es,[ts,e("input",{type:"text",name:"",id:"email",value:i.user.email,disabled:"",class:"textbox medium primary"},null,8,os)])]),is,e("div",null,[e("button",{class:"button medium primary",onClick:s[10]||(s[10]=o=>n.savedata())},rs)])]),e("div",ls,[e("div",ds,[e("div",{class:"button medium tertiary title-accordion pointer",onClick:s[11]||(s[11]=l(o=>n.select("changepassword"),["stop"]))},ms),e("div",{class:"dropdown-content-relative mt-3",onClick:s[25]||(s[25]=l(()=>{},["stop"]))},[e("div",ps,[hs,e("div",vs,[ws,d(e("input",{type:i.fieldShow.includes("password")?"text":"password",class:"textbox medium",id:"old_password",onClick:s[12]||(s[12]=l(()=>{},["stop"])),"onUpdate:modelValue":s[13]||(s[13]=o=>i.password.actual=o),maxlength:"20",onInput:s[14]||(s[14]=o=>n.cuttext(o,i.password.actual,20))},null,40,gs),[[h,i.password.actual]]),e("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:s[15]||(s[15]=l(o=>n.changeFieldShow("password"),["stop"])),textContent:c(i.fieldShow.includes("password")?"visibility_off":"visibility")},null,8,_s)]),e("div",fs,[e("div",bs,[xs,d(e("input",{type:i.fieldShow.includes("newpassword")?"text":"password",id:"newpassword",class:"textbox medium",onClick:s[16]||(s[16]=l(()=>{},["stop"])),"onUpdate:modelValue":s[17]||(s[17]=o=>i.password.new=o),maxlength:"20",onInput:s[18]||(s[18]=o=>n.cuttext(o,i.password.new,20))},null,40,ys),[[h,i.password.new]]),e("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:s[19]||(s[19]=l(o=>n.changeFieldShow("newpassword"),["stop"])),textContent:c(i.fieldShow.includes("newpassword")?"visibility_off":"visibility")},null,8,Cs)])]),e("div",Ss,[e("div",ks,[Is,d(e("input",{type:i.fieldShow.includes("confirmpassword")?"text":"password",id:"confirmnewpassword",class:"textbox medium",onClick:s[20]||(s[20]=l(()=>{},["stop"])),"onUpdate:modelValue":s[21]||(s[21]=o=>i.password.confirm=o),maxlength:"20",onInput:s[22]||(s[22]=o=>n.cuttext(o,i.password.confirm,20))},null,40,Ns),[[h,i.password.confirm]]),e("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:s[23]||(s[23]=l(o=>n.changeFieldShow("confirmpassword"),["stop"])),textContent:c(i.fieldShow.includes("confirmpassword")?"visibility_off":"visibility")},null,8,Vs)])]),e("div",null,[e("button",{class:"button medium primary",onClick:s[24]||(s[24]=l((...o)=>n.changepassword&&n.changepassword(...o),["stop"]))},Bs)])])])])]),e("div",Es,[e("div",Us,[e("div",{class:"button medium tertiary title-accordion pointer",onClick:s[26]||(s[26]=l(o=>n.select("help"),["stop"]))},js),Os])])])])])}const Ms=x(V,[["render",Ps],["__scopeId","data-v-28588368"]]);export{Ms as default};
