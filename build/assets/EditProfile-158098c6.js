import{_ as C,S as h,o as p,c as v,a as k,f as S,g as w,b as t,t as u,k as d,q as m,i as l,s as b,v as I,n as N,d as g,r as f,p as E,e as B,m as _}from"./app-af524dac.js";const V={data(){return{user:{name:"",last_name:"",doc_type:null,doc_type_text:null,doc_number:null,phone:null,email:null,ruc:null,social_reason:null,data_treatment:!1,percentage:0,initial:""},userprimal:{name:"",last_name:"",doc_type:null,doc_type_text:null,doc_number:null,phone:null,email:null,ruc:null,social_reason:null,data_treatment:!1,percentage:0,initial:""},changes:!0,password:{actual:"",new:"",confirm:""},shownavbar:!0,fieldShow:[],modal:{active:!1,name:null,size:"md"},loader:!1,errors:[],position:"top-end",errorform:!1}},mounted(){this.getdata(),document.addEventListener("click",this.closedrop)},beforeUnmount(){document.addEventListener("click",this.closedrop)},methods:{getdata(){this.loader=!0,axios.get("/provider/userdata").then(s=>{this.user.name=s.data.user.name,this.user.last_name=s.data.user.lastname,this.user.phone=s.data.user.phone,this.user.email=s.data.user.email,this.user.percentage=s.data.provider.complete,this.user.doc_type=s.data.provider.doc_type,this.user.doc_type_text=this.settypename(s.data.provider.doc_type),this.user.doc_number=s.data.provider.doc_number,this.user.ruc=s.data.provider.ruc,this.user.social_reason=s.data.provider.social_reason,this.user.data_treatment=s.data.user.data_treatment,this.user.initial=s.data.initial,this.userprimal.name=s.data.user.name,this.userprimal.last_name=s.data.user.lastname,this.userprimal.phone=s.data.user.phone,this.userprimal.email=s.data.user.email,this.userprimal.percentage=s.data.provider.complete,this.userprimal.doc_type=s.data.provider.doc_type,this.userprimal.doc_type_text=this.settypename(s.data.provider.doc_type),this.userprimal.doc_number=s.data.provider.doc_number,this.userprimal.ruc=s.data.provider.ruc,this.userprimal.social_reason=s.data.provider.social_reason,this.userprimal.data_treatment=s.data.user.data_treatment,this.userprimal.initial=s.data.initial,this.loader=!1})},getscreenwidth(){this.position="top-end",window.screen.width<768&&(this.position="top")},notification(s,e){this.getscreenwidth(),h.mixin({toast:!0,position:this.position,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,showCloseButton:!0,didOpen:c=>{c.addEventListener("mouseenter",h.stopTimer),c.addEventListener("mouseleave",h.resumeTimer)}}).fire({icon:e,title:s})},savedata(){if(this.errorform=!1,Object.keys(this.handleSubmit()).length>0){if(!this.errorform){const s={user:this.handleSubmit()};axios.post("/provider/userdata",s).then(e=>{e.data.success&&(this.user.percentage=e.data.complete,this.notification("Datos guardados","success"),this.getdata())})}}else this.notification("No hay cambios que guardar","warning")},select(s){document.querySelectorAll(".dropdown-container").forEach(function(c){c.id!=s&&c.classList.remove("active")}),document.getElementById(s).classList.toggle("active")},setdoc_type(s){this.user.doc_type=s,this.select("document"),this.user.doc_type_text=this.settypename(s)},settypename(s){if(s==1)var e="DNI";if(s==2)var e="Carnet de extranjería";if(s==3)var e="Pasaporte";return e},changeFieldShow(s){if(this.fieldShow.includes(s)){let e=this.fieldShow.indexOf(s);e>=0&&this.fieldShow.splice(e,1)}else this.fieldShow.push(s)},validatePassword(){this.errors=[],(this.password.actual.length==0||this.password.new.length==0)&&this.errors.push("Contraseña vacía"),this.password.confirm.length==0&&this.errors.push("Confirmar contraseña"),this.password.new.length>=4&&this.password.new.length<=20||this.errors.push("Formato de contraseña nueva incorrecto"),this.password.confirm.length>=4&&this.password.confirm.length<=20||this.errors.push("Formato de confirmación de contraseña incorrecto"),this.password.new.length>0&&this.password.confirm.length>0&&this.password.new==this.password.confirm||this.errors.push("Las contraseñas ingresadas no coinciden"),this.errors.length>0&&this.notification(this.errors[0],"warning")},validatePhone(s){return/^9[0-9]+/.test(s)},onlyNumbers(s,e){let r=window.Event?s.which:s.keyCode;r>=48&&r<=57?(s.target.value.length>e&&s.preventDefault(),e==8&&this.user.phone==""&&r<57&&(s.preventDefault(),this.notification("El primer número debe ser 9","warning"))):s.preventDefault()},closedrop(){document.querySelectorAll(".dropdown-container").forEach(function(e){e.classList.remove("active")})},addservicemodal(){this.modal.name="addservice",this.modal.size="lg",this.modal.active=!0,this.serviceid=null;const s=document.getElementById("modal");setTimeout(()=>{s.classList.toggle("active")},20)},closemodal(s){this.modal.active&&s?h.fire({title:"¿Seguro que deseas salir?",text:"Se perderán todos los datos",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No",customClass:{container:"xp-sweet-container-xs"}}).then(e=>{e.value&&(document.getElementById("modal").classList.remove("active"),setTimeout(()=>{this.modal.active=!1},300))}):(s==null||s==!1)&&(document.getElementById("modal").classList.remove("active"),setTimeout(()=>{this.modal.active=!1},300)),document.title="Rumba77"},handleSubmit(){return Object.keys(this.changedFormData).length===0?[]:this.changedFormData},changepassword(){if(this.validatePassword(),this.errors.length==0){const s={password:this.password};axios.post("/user/changepassword",s).then(e=>{e.data.success&&(this.notification(e.data.message,"success"),this.password.actual="",this.password.new="",this.password.confirm="")}).catch(e=>{this.notification(e.response.data.errors[0],"error")})}else this.notification(this.errors[0],"error")},cutnumber(s,e,r){if(s.target.value>0)return parseInt(s.target.value.slice(0,r));if(e>0&&(s.target.value=parseInt(e.toString().slice(0,r)),e>9&&r==9&&(this.validatePhone(e)||(this.notification("El número debe empezar por 9","warning"),s.target.value="",this.user.phone=""))),s.target.value=="")return""},cuttext(s,e){return s.slice(0,e)}},computed:{changedFormData(){return Object.keys(this.user).reduce((s,e)=>(this.user[e]!==this.userprimal[e]&&(s[e]=this.user[e],(e=="name"||e=="last_name")&&(this.userprimal[e]==null||this.user[e]=="")&&(this.notification("No puede guardar un campo vacío","warning"),this.getdata(),this.errorform=!0)),s),{})}}},i=s=>(E("data-v-2caa68d3"),s=s(),B(),s),D={class:"landing-page-desktop"},L={class:"main-profile"},T=i(()=>t("div",{class:"profile-header-container"},null,-1)),U={class:"content-profile"},F={class:"avatar-main"},P={class:"default-avatar"},R={class:"avatar-initial"},j=["textContent"],z={class:"avatar-options"},O=i(()=>t("div",null,[t("span",{class:"headline-medium"},"Mi perfil")],-1)),q={class:"pro-progress-container"},M={class:"body-small"},A=["value"],K={class:"personal-form"},G=i(()=>t("div",{class:"title-profile"},[t("div",{class:"title-medium"}," Datos personales de proveedor "),t("div",{class:"body-large"}," Cuéntanos un poco más sobre ti. ")],-1)),W={class:"input-group-profile"},H={class:"textbox-input"},J=i(()=>t("label",{class:"label-medium"},"Nombres",-1)),Q={class:"textbox-input"},X=i(()=>t("label",{class:"label-medium"},"Apellidos",-1)),Y={class:"input-group-profile"},Z={class:"dropdown-box primary profile"},$=i(()=>t("div",{class:"label-medium"},"Tipo de documento",-1)),ee={class:"dropdown-container",id:"document"},te=["textContent"],se=i(()=>t("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),oe={class:"dropdown-content"},ae={class:"options"},ie={class:"textbox-input"},ne=i(()=>t("label",{class:"label-medium"},"Número de documento",-1)),le={class:"input-group-profile"},re={class:"textbox-input"},de=i(()=>t("label",{class:"label-medium"},"Celular",-1)),ce={class:"textbox-input"},ue=i(()=>t("label",{class:"label-medium"},"Correo electrónico",-1)),me=["value"],pe={class:"input-group-profile"},he={class:"textbox-input"},ve=i(()=>t("label",{class:"label-medium"},"RUC (opcional)",-1)),_e={class:"textbox-input"},be=i(()=>t("label",{class:"label-medium"},"Razón social (opcional)",-1)),we=g('<div class="a-stretch" data-v-2caa68d3><div class="banner small reminder w-inherit" data-v-2caa68d3><button class="button disabled small secondary" data-v-2caa68d3><span class="material-symbols-outlined" data-v-2caa68d3>info</span></button><div class="body-medium highlight" data-v-2caa68d3>Los datos brindados nos permitirá ofrecerles mejores servicios y comunicarnos con usted de ser necesario para las promociones o publicidad.</div></div></div>',1),fe=i(()=>t("span",{class:"material-symbols-outlined"},"save",-1)),ge=_(" Guardar cambios"),ye=[fe,ge],xe={class:"personal-form"},Ce={class:"dropdown-container",id:"changepassword"},ke=i(()=>t("span",{class:"title-medium dropd-text"},"Contraseña",-1)),Se=i(()=>t("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),Ie=[ke,Se],Ne={class:"personal-form"},Ee=i(()=>t("div",{class:"body-large"}," Cambia tu contraseña cuando quieras. ",-1)),Be={class:"textbox-input"},Ve=i(()=>t("label",{class:"label-medium"},"Contraseña actual",-1)),De=["type"],Le=["textContent"],Te={class:"w-100"},Ue={class:"textbox-input"},Fe=i(()=>t("label",{class:"label-medium"},"Nueva contraseña",-1)),Pe=["type"],Re=["textContent"],je={class:"w-100"},ze={class:"textbox-input"},Oe=i(()=>t("label",{class:"label-medium"},"Repetir contraseña",-1)),qe=["type"],Me=["textContent"],Ae=i(()=>t("span",{class:"material-symbols-outlined"},"save",-1)),Ke=_(" Guardar cambios"),Ge=[Ae,Ke],We={class:"personal-form"},He={class:"dropdown-container",id:"help"},Je=i(()=>t("span",{class:"title-medium"},"¿Necesitas ayuda?",-1)),Qe=i(()=>t("span",{class:"material-symbols-outlined icon"},"expand_more",-1)),Xe=[Je,Qe],Ye={class:"dropdown-content-relative mt-3"},Ze=g('<a class="button small tertiary icon-text" href="https://wa.me/+51907327913?text=Hola%2C%20vengo%20desde%20la%20web%20de%20Rumba77%2C%20necesito%20ayuda" target="_blank" data-v-2caa68d3><img src="/img/whatsapp-black.svg" class="icon-primary violet" data-v-2caa68d3><div class="" data-v-2caa68d3>907 327 913</div></a><a class="button small tertiary icon-text" href="https://web.facebook.com/rumba77.oficial" target="_blank" data-v-2caa68d3><img src="/img/facebook-white.svg" class="icon-primary violet" data-v-2caa68d3><div class="" data-v-2caa68d3>Rumba77</div></a><a class="button small tertiary icon-text" href="mailto:hola@rumba77.com" data-v-2caa68d3><span class="material-symbols-outlined icon-left highlight" data-v-2caa68d3>mail</span><div class="" data-v-2caa68d3>hola@rumba77.com</div></a>',3),$e=[Ze],et={class:"modal-shadow"},tt={class:"modal-header"},st=i(()=>t("div",null,null,-1)),ot=_("Cerrar "),at=i(()=>t("span",{class:"material-symbols-outlined"},"close",-1)),it=[ot,at],nt=_("Cerrar "),lt=i(()=>t("span",{class:"material-symbols-outlined"},"close",-1)),rt=[nt,lt],dt={key:0,class:"modal-body"};function ct(s,e,r,c,o,n){const y=f("nav-bar"),x=f("loader");return p(),v("div",D,[k(y,{shownavbar:o.shownavbar},null,8,["shownavbar"]),o.loader?(p(),S(x,{key:0})):w("",!0),t("div",L,[T,t("div",U,[t("div",F,[t("div",P,[t("div",R,[t("span",{class:"headline-large text-white",textContent:u(o.user.initial?o.user.initial:"R")},null,8,j)])]),t("div",z,[O,t("div",q,[t("div",null,[t("span",M,u(parseInt(o.user.percentage))+"% completado",1)]),t("progress",{class:"profile-progress",value:o.user.percentage,max:"100"},null,8,A)])])]),t("div",K,[G,t("div",W,[t("div",H,[J,d(t("input",{type:"text",name:"","onUpdate:modelValue":e[0]||(e[0]=a=>o.user.name=a),maxlength:"40",class:"textbox medium primary"},null,512),[[m,o.user.name]])]),t("div",Q,[X,d(t("input",{type:"text",name:"","onUpdate:modelValue":e[1]||(e[1]=a=>o.user.last_name=a),maxlength:"40",class:"textbox medium primary"},null,512),[[m,o.user.last_name]])])]),t("div",Y,[t("div",Z,[$,t("div",ee,[t("button",{class:"dropdown dropdown-small",onClick:e[2]||(e[2]=l(a=>n.select("document"),["stop"]))},[t("span",{class:"body-medium",textContent:u(o.user.doc_type?o.user.doc_type_text:"Seleccionar")},null,8,te),se]),t("div",oe,[t("ul",ae,[t("li",{class:"label-small",onClick:e[3]||(e[3]=l(a=>n.setdoc_type(1),["stop"]))},"DNI"),t("li",{class:"label-small",onClick:e[4]||(e[4]=l(a=>n.setdoc_type(2),["stop"]))},"Carnet de extranjería"),t("li",{class:"label-small",onClick:e[5]||(e[5]=l(a=>n.setdoc_type(3),["stop"]))},"Pasaporte")])])])]),t("div",ie,[ne,d(t("input",{type:"number",name:"",onKeypress:e[6]||(e[6]=a=>n.onlyNumbers(a,7)),onInput:e[7]||(e[7]=a=>o.user.doc_number=n.cutnumber(a,o.user.doc_number,8)),"onUpdate:modelValue":e[8]||(e[8]=a=>o.user.doc_number=a),class:"textbox medium primary"},null,544),[[m,o.user.doc_number]])])]),t("div",le,[t("div",re,[de,d(t("input",{type:"number",name:"",onKeypress:e[9]||(e[9]=a=>n.onlyNumbers(a,8)),"onUpdate:modelValue":e[10]||(e[10]=a=>o.user.phone=a),onInput:e[11]||(e[11]=a=>o.user.phone=n.cutnumber(a,o.user.phone,9)),maxlength:"9",class:"textbox medium primary"},null,544),[[m,o.user.phone]])]),t("div",ce,[ue,t("input",{type:"text",name:"",value:o.user.email,disabled:"",class:"textbox medium primary"},null,8,me)])]),t("div",pe,[t("div",he,[ve,d(t("input",{type:"number",name:"",onKeypress:e[12]||(e[12]=a=>n.onlyNumbers(a,10)),onInput:e[13]||(e[13]=a=>o.user.ruc=n.cutnumber(a,o.user.ruc,11)),"onUpdate:modelValue":e[14]||(e[14]=a=>o.user.ruc=a),class:"textbox medium primary"},null,544),[[m,o.user.ruc]])]),t("div",_e,[be,d(t("input",{type:"text",name:"","onUpdate:modelValue":e[15]||(e[15]=a=>o.user.social_reason=a),class:"textbox medium primary",maxlength:"60"},null,512),[[m,o.user.social_reason]])])]),we,t("div",null,[t("button",{class:"button medium primary",onClick:e[16]||(e[16]=l(a=>n.savedata(),["stop"]))},ye)])]),t("div",xe,[t("div",Ce,[t("div",{class:"button medium tertiary title-accordion pointer",onClick:e[17]||(e[17]=l(a=>n.select("changepassword"),["stop"]))},Ie),t("div",{class:"dropdown-content-relative mt-3",onClick:e[31]||(e[31]=l(()=>{},["stop"]))},[t("div",Ne,[Ee,t("div",Be,[Ve,d(t("input",{type:o.fieldShow.includes("password")?"text":"password",class:"textbox medium",onClick:e[18]||(e[18]=l(()=>{},["stop"])),"onUpdate:modelValue":e[19]||(e[19]=a=>o.password.actual=a),maxlength:"20",onInput:e[20]||(e[20]=a=>o.password.actual=n.cuttext(o.password.actual,20))},null,40,De),[[b,o.password.actual]]),t("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:e[21]||(e[21]=l(a=>n.changeFieldShow("password"),["stop"])),textContent:u(o.fieldShow.includes("password")?"visibility_off":"visibility")},null,8,Le)]),t("div",Te,[t("div",Ue,[Fe,d(t("input",{type:o.fieldShow.includes("newpassword")?"text":"password",class:"textbox medium",onClick:e[22]||(e[22]=l(()=>{},["stop"])),"onUpdate:modelValue":e[23]||(e[23]=a=>o.password.new=a),maxlength:"20",onInput:e[24]||(e[24]=a=>o.password.new=n.cuttext(o.password.new,20))},null,40,Pe),[[b,o.password.new]]),t("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:e[25]||(e[25]=l(a=>n.changeFieldShow("newpassword"),["stop"])),textContent:u(o.fieldShow.includes("newpassword")?"visibility_off":"visibility")},null,8,Re)])]),t("div",je,[t("div",ze,[Oe,d(t("input",{type:o.fieldShow.includes("confirmpassword")?"text":"password",class:"textbox medium",onClick:e[26]||(e[26]=l(()=>{},["stop"])),"onUpdate:modelValue":e[27]||(e[27]=a=>o.password.confirm=a),maxlength:"20",onInput:e[28]||(e[28]=a=>o.password.confirm=n.cuttext(o.password.confirm,20))},null,40,qe),[[b,o.password.confirm]]),t("span",{class:"material-symbols-outlined pointer icon-login-show",onClick:e[29]||(e[29]=l(a=>n.changeFieldShow("confirmpassword"),["stop"])),textContent:u(o.fieldShow.includes("confirmpassword")?"visibility_off":"visibility")},null,8,Me)])]),t("div",null,[t("button",{class:"button medium primary",onClick:e[30]||(e[30]=(...a)=>n.changepassword&&n.changepassword(...a))},Ge)])])])])]),t("div",We,[t("div",He,[t("div",{class:"button medium tertiary title-accordion pointer",onClick:e[32]||(e[32]=l(a=>n.select("help"),["stop"]))},Xe),t("div",Ye,[t("div",{class:"input-group-profile",onClick:e[33]||(e[33]=l(()=>{},["stop"]))},$e)])])])]),d(t("div",et,[t("div",{class:N(["modal-container",o.modal.size]),onClick:e[36]||(e[36]=l(()=>{},["stop"])),id:"modal"},[t("div",tt,[st,t("div",null,[o.modal.name=="addservice"?(p(),v("button",{key:0,class:"button small tertiary",onClick:e[34]||(e[34]=l(a=>n.closemodal(!0),["stop"]))},it)):(p(),v("button",{key:1,class:"button small tertiary",onClick:e[35]||(e[35]=l(a=>n.closemodal(!1),["stop"]))},rt))])]),o.modal.name=="addservice"&&o.modal.active?(p(),v("div",dt)):w("",!0)],2)],512),[[I,o.modal.active]])])])}const mt=C(V,[["render",ct],["__scopeId","data-v-2caa68d3"]]);export{mt as default};
